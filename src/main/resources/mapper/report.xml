<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.blessing.aisaka.dao.IReportDao">
    <resultMap id="reportList" type="com.blessing.aisaka.entity.Report">
        <id column="id" property="id"/>
        <result column="paper_id" property="paperId"/>
        <result column="course_id" property="courseId"/>
        <result column="courseName" property="courseName"/>
        <result column="student_id" property="studentId"/>
        <result column="studentName" property="studentName"/>
        <result column="score" property="score"/>
        <result column="answer" property="answer"/>
        <result column="answerTime" property="answerTime"/>
    </resultMap>

    <select id="queryReportsByCourseId" resultMap="reportList">
        SELECT
          r.id,u.name studentName,score
        FROM
          report r,user u
        WHERE
          r.course_id=#{id}
          AND r.student_id=u.id
          AND u.admin=false
    </select>

    <select id="queryReportById" resultType="com.blessing.aisaka.entity.Report">
        SELECT
          id,paper_id,course_id,student_id,score,answer,time answerTime
        FROM
          report
        WHERE
          id=#{id}
    </select>
</mapper>